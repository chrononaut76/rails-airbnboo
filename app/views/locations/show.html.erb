<div class="container">
  <h1><%= @location.name %></h1>
  <div class="card">
    <p><strong>Address:</strong> <%= @location.address %></p>
    <p><strong>Description:</strong> <%= @location.description %></p>
    <p><strong>Price:</strong> <%= @location.price %></p>

    <% if current_user.present? && current_user.is_host %>
      <%# Host control flow %>
      <% if @booking.present? %>
        <%= link_to @booking.status.upcase, edit_booking_path(@booking) %>
      <% else %>
        <p>There are no bookings for this location</p>
        <p><%= link_to "Back", locations_path %></p>
      <% end %>
      <%# Signed-in user control flow %>
    <% elsif user_signed_in? && @pending_booking.present? %>
      <p><%= @pending_booking.status.upcase %></p>
    <% else %>
      <%= render 'bookings/form', location: @location %>
    <% end %>
  </div>
</div>
